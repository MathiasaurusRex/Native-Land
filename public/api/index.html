<!DOCTYPE html>
<html lang="en">
<head>
    <title>Native-land.ca | API Endpoint</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
      <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
      <meta name="keywords" content="first nations maps, settler americas, turtle island, aboriginal maps, indigenous map, native land">
      <meta name="description" content="Welcome to Native Land. This is a resource for North Americans (and others)
                                        to find out more about local indigenous territories and languages.">

      <!-- <meta property="fb:app_id" content="APP_ID"> -->
      <meta property="og:title" content="NativeLand.ca">
      <meta property="og:description" content="Welcome to Native Land. This is a resource for North Americans (and others)
                                        to find out more about local indigenous territories and languages.">
      <meta property="og:type" content="website">
      <meta property="og:url" content="https://native-land.ca">
      <meta property="og:image" content="https://native-land.ca/images/incomplete-territories.png">
      <meta property="og:site_name" content="Native-land.ca - Our home on native land">
      <link rel="icon" href="/images/favicon.png" type="image/x-icon"/>

    <link href="../bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="../bootstrap/bootstrap-switch.min.css" rel="stylesheet">
    <link href="../css/bootstrap-style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.css" />

    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-61451694-1', 'auto');
      ga('send', 'pageview');

    </script>
    <style>
        .exampleMap {
            height: 280px;
            width: 100%;
        }
        iframe {
            border: none;
        }
    </style>

</head>

<body>
    <div class="container">
        <h1>Native-Land API Documentation</h1>
        <p>This allows you to do some calls that will return specific data on nations, languages, or treaties, that you can use
        in your programming.</p>
        <h2>Embed Code</h2>
        <p>Create an iframe as follows:</p>
            <pre>&lt;iframe src="https://native-land.ca/api/embed/embed.html?maps=languages&name=witsuwiten"&gt;&lt;/iframe&gt;</pre>
        <p>Further instructions
            for how to use the API (by entering different URLs) are below.</p>
        <iframe style="display:inline-block" src="https://native-land.ca/api/embed/embed.html?maps=languages&name=lower-chinook&lang=fr" width="300" height="300"></iframe>
        <iframe style="display:inline-block" src="https://native-land.ca/api/embed/embed.html?maps=territories,treaties&name=mtis,treaty8" width="300" height="300"></iframe>
        <iframe style="display:inline-block" src="https://native-land.ca/api/embed/embed.html?maps=treaties&lang=fr" width="300" height="200"></iframe>
        <h2>AJAX Requests</h2>
        <p>You can choose a language. By default it is English. Add "&lang=fr" to get French results instead.</p>
        <p>You must supply one or more <strong>type</strong>. There are 3 types:</p>
        <ul>
            <li>territories</li>
            <li>languages</li>
            <li>treaties</li>
        </ul>
        <p><strong>These must be submitted according to the Slug. <a href="#allSlugs">You can see these listed below</a>.</strong></p>
        <p>You can also optionally supply one or more <strong>name</strong>. These are listed at the bottom of this page (it's a big list). These
        must be supplied within the correct type for the name (only names of treaties with the treaty type, for instance).</p>
        <h3>Usage</h3>
        <p>Do a GET request to the following URL: <strong>https://native-land.ca/api/index.php</strong> in the following format:</p>
        <p><strong>General maps:</strong> https://native-land.ca/api/index.php?maps=territories,treaties,languages</p>
        <p><strong>Specific polygons:</strong> https://native-land.ca/api/index.php?maps=territories&name=nakota,lakota</p>

        <h3>Examples</h3>
        <h4>Specific languages ( api/index.php?maps=languages&name=nakota,lakota )</h4>
        <div id="specificLanguagesMap" class="exampleMap"></div>
        <h4>Mixed results, languages and treaties ( api/index.php?maps=territories,treaties&name=mtis,treaty8 )</h4>
        <div id="mixedLanguageTreatyMap" class="exampleMap"></div>
        <h4>One languages ( api/index.php?maps=languages&name=witsuwiten )</h4>
        <div id="oneLanguageMap" class="exampleMap"></div>
        <h4>All languages ( api/index.php?maps=languages )</h4>
        <div id="allLanguageMap" class="exampleMap"></div>

        <a name="allSlugs"></a><h2>Slug references</h2></a>
        <p>To property call the correct territories, treaties, or languages, you need to send the correct slug in the URL.
            These are not necessarily predictable, so you need to check the list below.</p>
        <ul>
            <li><a href="#territorySlugs">territories</a></li>
            <li><a href="#languageSlugs">languages</a></li>
            <li><a href="#treatySlugs">treaties</a></li>
        </ul>
        <a name="territorySlugs"></a><h4>Territories</h4>
        <table id="territory-slug-table" class="table"></table>
        <a name="languageSlugs"></a><h4>Languages</h4>
        <table id="language-slug-table" class="table"></table>
        <a name="treatySlugs"></a><h4>Treaties</h4>
        <table id="treaty-slug-table" class="table"></table>

    </div>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.3/leaflet.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry,places,drawing"></script>
<script src="../js/fromgeojson.js"></script>
<script>
    $.get( "index.php?maps=languages&name=nakota,lakota", function( data ) {
        var map = L.map('specificLanguagesMap').setView([51.505, -0.09], 13);
        L.tileLayer( 'https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="https://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="https://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
        }).addTo( map );
        var allGeoJsons = [];
        data.forEach(function(element,index,array) {
            var thisGeoJson = L.geoJson(element);
            allGeoJsons.push(thisGeoJson);
        });
        var layerGeoJsons = L.featureGroup(allGeoJsons).addTo(map);
        map.fitBounds(layerGeoJsons.getBounds());
    });

    $.get( "index.php?maps=territories,treaties&name=mtis,treaty8", function( data ) {
        var map = L.map('mixedLanguageTreatyMap').setView([51.505, -0.09], 13);
        L.tileLayer( 'https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="https://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="https://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
        }).addTo( map );
        var allGeoJsons = [];
        data.forEach(function(element,index,array) {
            var thisGeoJson = L.geoJson(element);
            allGeoJsons.push(thisGeoJson);
        });
        var layerGeoJsons = L.featureGroup(allGeoJsons).addTo(map);
        map.fitBounds(layerGeoJsons.getBounds());
    });

    $.get( "index.php?maps=languages&name=witsuwiten", function( data ) {
        var map = L.map('oneLanguageMap').setView([51.505, -0.09], 13);
        L.tileLayer( 'https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="https://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="https://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
            subdomains: ['otile1','otile2','otile3','otile4']
        }).addTo( map );
        var allGeoJsons = [];
        data.forEach(function(element,index,array) {
            var thisGeoJson = L.geoJson(element);
            allGeoJsons.push(thisGeoJson);
        });
        var layerGeoJsons = L.featureGroup(allGeoJsons).addTo(map);
        map.fitBounds(layerGeoJsons.getBounds());
    });

    $.get( "index.php?maps=languages", function( data ) {
        var map = L.map('allLanguageMap').setView([51.505, -0.09], 13);
        L.tileLayer( 'https://{s}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="https://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="https://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
        }).addTo( map );
        var allGeoJsons = [];
        data.forEach(function(element,index,array) {
            var thisGeoJson = L.geoJson(element);
            allGeoJsons.push(thisGeoJson);
        });
        var layerGeoJsons = L.featureGroup(allGeoJsons).addTo(map);
        map.fitBounds(layerGeoJsons.getBounds());
    });

    var indigenousLanguagesGeoJSON, indigenousTerritoriesGeoJSON, indigenousTreatiesGeoJSON;
    $.getJSON("../coordinates/indigenousLanguages.json", function(data){
        var indigenousLanguages = data;
        indigenousLanguagesGeoJSON = new GeoJSON(indigenousLanguages);
        indigenousLanguagesGeoJSON.forEach( function(element,array,index) {
            $('#language-slug-table').append('<tr><td>'+element[0].geojsonProperties.Name+'</td><td>'+element[0].geojsonProperties.Slug+'</li>');
        });
        $.getJSON("../coordinates/indigenousTerritories.json", function(data){
          data.features.forEach(function(element,index,array) {
            element.geometry.coordinates[0][0].push(element.geometry.coordinates[0][0][0]);
          });
            var indigenousTerritories = data;
            indigenousTerritoriesGeoJSON = new GeoJSON(indigenousTerritories);
            indigenousTerritoriesGeoJSON.forEach( function(element,array,index) {
                $('#territory-slug-table').append('<tr><td>'+element[0].geojsonProperties.Name+'</td><td>'+element[0].geojsonProperties.Slug+'</li>');
            });
            $.getJSON("../coordinates/indigenousTreaties.json", function(data){
                var indigenousTreaties = data;
                indigenousTreaties.features.forEach(function(element,index,array) {
                  element.geometry.coordinates[0].forEach(function(element2,index2,array2) {
                    console.log(element2);
                    if(element2[0][0]!==element2[element2.length-1][0]||element2[0][1]!==element2[element2.length-1][1]) {
                      element2.push(element2[0]);
                    }
                  });
                });
                console.log(indigenousTreaties);
                var indigenousTreaties = data;
                indigenousTreatiesGeoJSON = new GeoJSON(indigenousTreaties);
                indigenousTreatiesGeoJSON.forEach( function(element,array,index) {
                    $('#treaty-slug-table').append('<tr><td>'+element[0].geojsonProperties.Name+'</td><td>'+element[0].geojsonProperties.Slug+'</li>');
                });
            });
        });
    });
</script>
